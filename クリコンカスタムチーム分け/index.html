<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>ã‚¯ãƒªã‚³ãƒ³ã‚«ã‚¹ã‚¿ãƒ ç”¨ãƒãƒ¼ãƒ åˆ†ã‘</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{
  font-family:"Noto Serif JP","Hiragino Mincho ProN","Yu Mincho",serif;
  max-width:1000px;
  margin:auto;
  padding-bottom:200px;
  background:linear-gradient(135deg,#a0e9ff,#f3f0ff,#c0eaff);
  background-size:400% 400%;
  animation:crystal 15s ease infinite;
}
@keyframes crystal{
  0%{background-position:0% 50%}
  50%{background-position:100% 50%}
  100%{background-position:0% 50%}
}
.ff-panel{
  background:rgba(20,20,30,.75);
  border:1px solid rgba(255,215,120,.6);
  border-radius:12px;
  padding:15px;
  margin-bottom:25px;
}
h1,h2,h3{
  color:#f5e6b0;
  text-shadow:0 0 5px rgba(255,215,120,.6);
  text-align:center;
}
table{
  border-collapse:collapse;
  width:100%;
  background:rgba(0,0,0,.4);
  border-radius:10px;
  overflow:hidden;
  margin-bottom:10px;
}
th{background:rgba(255,215,120,.15);color:#f5e6b0}
td{background:rgba(255,255,255,.05);padding:6px;text-align:center}
input,select,textarea{width:100%;padding:6px;font-size:16px}
button{
  width:100%;
  padding:10px;
  margin:6px 0;
  font-size:16px;
  background:linear-gradient(#3a3a4f,#1c1c2a);
  border:1px solid rgba(255,215,120,.7);
  color:#f5e6b0;
  border-radius:10px;
  cursor:pointer;
}
ul{list-style:none;padding:0}
li{
  margin:6px 0;
  padding:8px;
  border-radius:8px;
  background:rgba(0,0,0,.35);
  color:white;
}
.faction{
  display:flex;
  justify-content:center;
  align-items:center;
  gap:8px;
}
.faction-icon{
  width:26px;height:26px;
  border-radius:50%;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:18px;
}
.faction-astra{background:radial-gradient(circle,#fff6cc,#d4af37)}
.faction-umbra{background:radial-gradient(circle,#cbbcff,#4b3f72)}
.history-actions{display:flex;gap:6px;margin:6px 0}
.fixed-footer{
  position:fixed;
  bottom:0;
  left:0;
  width:100%;
  background:rgba(20,20,30,.85);
  border-top:1px solid rgba(255,215,120,.5);
  color:#f5e6b0;
  font-size:12px;
  text-align:center;
  padding:10px 0;
}
textarea.memo{resize:none;width:100%;margin-top:6px;padding:6px;font-size:14px;background:rgba(255,255,255,.05);color:#fff;border-radius:6px;border:none}
</style>
</head>
<body>
<h1>ã‚¯ãƒªã‚³ãƒ³ã‚«ã‚¹ã‚¿ãƒ ç”¨ãƒãƒ¼ãƒ åˆ†ã‘ </h1>

<div class="ff-panel">
<h2>éšç´šãƒ»ãƒ¬ãƒ¼ãƒˆå‚ç…§ãƒãƒ¼ãƒ åˆ†ã‘ </h2>
<table id="powerTable">
<tr><th>PLAYER</th><th>éšç´šãƒ»ãƒ¬ãƒ¼ãƒˆ</th></tr>
</table>
<button onclick="runPower()">ãƒãƒ¼ãƒ åˆ†ã‘</button>
<button onclick="copyTeams(false)">çµæœã‚’ã‚³ãƒ”ãƒ¼ï¼ˆåå‰ã®ã¿ï¼‰</button>
<button onclick="copyTeams(true)">çµæœã‚’ã‚³ãƒ”ãƒ¼ï¼ˆ/aä»˜ãï¼‰</button>

<div class="faction"><span class="faction-icon faction-astra">â˜€</span><h3>ã‚¢ã‚¹ãƒˆãƒ©</h3></div>
<ul id="powerA"></ul>
<div class="faction"><span class="faction-icon faction-umbra">ğŸŒ™</span><h3>ã‚¢ãƒ³ãƒ–ãƒ©</h3></div>
<ul id="powerB"></ul>
</div>

<div class="ff-panel">
<h2>ãƒãƒ¼ãƒ å±¥æ­´ </h2>
<ul id="history"></ul>
<button onclick="clearHistory()" style="background:#a94442">å±¥æ­´ã‚’å…¨å‰Šé™¤</button>
</div>

<footer class="fixed-footer">
<p>&copy; 2010 - 2025 SQUARE ENIX CO., LTD. All Rights Reserved.</p>
</footer>

<script>
const ranks=["~ã‚´ãƒ¼ãƒ«ãƒ‰","ãƒ—ãƒ©ãƒãƒŠ","ãƒ€ã‚¤ã‚¢ãƒ¢ãƒ³ãƒ‰","ã‚¯ãƒªã‚¹ã‚¿ãƒ«ï¼ˆï½1000ï¼‰","ã‚¯ãƒªã‚¹ã‚¿ãƒ«ï¼ˆ1000ï½1999ï¼‰","ã‚ªãƒ¡ã‚¬","ã‚¢ãƒ«ãƒ†ãƒ"];
const rankValue={"~ã‚´ãƒ¼ãƒ«ãƒ‰":1,"ãƒ—ãƒ©ãƒãƒŠ":2,"ãƒ€ã‚¤ã‚¢ãƒ¢ãƒ³ãƒ‰":3,"ã‚¯ãƒªã‚¹ã‚¿ãƒ«ï¼ˆï½1000ï¼‰":4,"ã‚¯ãƒªã‚¹ã‚¿ãƒ«ï¼ˆ1000ï½1999ï¼‰":5,"ã‚ªãƒ¡ã‚¬":6,"ã‚¢ãƒ«ãƒ†ãƒ":7};
const rankColor={"~ã‚´ãƒ¼ãƒ«ãƒ‰":"#FFD700","ãƒ—ãƒ©ãƒãƒŠ":"#7FDBFF","ãƒ€ã‚¤ã‚¢ãƒ¢ãƒ³ãƒ‰":"#FFA500","ã‚¯ãƒªã‚¹ã‚¿ãƒ«ï¼ˆï½1000ï¼‰":"#1E90FF","ã‚¯ãƒªã‚¹ã‚¿ãƒ«ï¼ˆ1000ï½1999ï¼‰":"#000000","ã‚ªãƒ¡ã‚¬":"#800080","ã‚¢ãƒ«ãƒ†ãƒ":"#FF0000"};

const powerTable=document.getElementById("powerTable");
const historyList=document.getElementById("history");

for(let i=0;i<10;i++){
  powerTable.innerHTML+=`<tr>
    <td><input></td>
    <td><select>${ranks.map(r=>`<option>${r}</option>`)}</select></td>
  </tr>`;
}

let history=JSON.parse(localStorage.getItem("history")||"[]");
renderHistory();

function runPower(){
  const p=[...powerTable.rows].slice(1).map(r=>({
    name:r.cells[0].firstChild.value,
    rank:r.cells[1].firstChild.value,
    val:rankValue[r.cells[1].firstChild.value]
  }));
  p.sort((a,b)=>b.val-a.val);
  let A=[],B=[],sa=0,sb=0;
  p.forEach(x=>sa<=sb?(A.push(x),sa+=x.val):(B.push(x),sb+=x.val));
  show(A,B,"powerA","powerB");
  saveHistory("éšç´šãƒ»ãƒ¬ãƒ¼ãƒˆ",A,B);
}

function show(A,B,idA,idB){
  document.getElementById(idA).innerHTML="";
  document.getElementById(idB).innerHTML="";
  A.forEach(x=>document.getElementById(idA).innerHTML+=`<li style="background:${rankColor[x.rank]}">${x.name}</li>`);
  B.forEach(x=>document.getElementById(idB).innerHTML+=`<li style="background:${rankColor[x.rank]}">${x.name}</li>`);
}

function saveHistory(type,A,B){
  history.unshift({id:Date.now(),time:new Date().toLocaleString(),type,A:A.map(x=>x.name),B:B.map(x=>x.name),memo:""});
  localStorage.setItem("history", JSON.stringify(history));
  renderHistory();
}

function renderHistory(){
  historyList.innerHTML="";
  history.forEach(h=>{
    const li = document.createElement("li");
    li.innerHTML = `
      <b>${h.time}ï¼ˆ${h.type}ï¼‰</b><br>
      â˜€ ${h.A.join("ã€")}<br>
      ğŸŒ™ ${h.B.join("ã€")}
      <textarea class="memo" placeholder="ãƒ¡ãƒ¢">${h.memo||""}</textarea>
      <div class="history-actions">
        <button style="background:#a94442">ã“ã®å±¥æ­´ã‚’å‰Šé™¤</button>
      </div>
    `;
    const textarea = li.querySelector("textarea");
    textarea.addEventListener("input", (e)=>{
      h.memo = e.target.value;
      localStorage.setItem("history", JSON.stringify(history));
    });
    const delBtn = li.querySelector("button");
    delBtn.addEventListener("click", ()=>{
      if(confirm("ã“ã®å±¥æ­´ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ")){
        history = history.filter(x=>x.id!==h.id);
        localStorage.setItem("history", JSON.stringify(history));
        li.remove();
      }
    });
    historyList.appendChild(li);
  });
}

function clearHistory(){if(confirm("å±¥æ­´ã‚’ã™ã¹ã¦å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ")){history=[];localStorage.setItem("history", JSON.stringify(history));renderHistory();}}

function copyTeams(isAlliance){
  let text = "";
  if(isAlliance) text += "/a\n";

  const pairs = [
    {label:"ã€ã‚¢ã‚¹ãƒˆãƒ©ã€‘", selector:"#powerA li"},
    {label:"ã€ã‚¢ãƒ³ãƒ–ãƒ©ã€‘", selector:"#powerB li"}
  ];

  pairs.forEach(p=>{
    text += p.label + "\n";
    document.querySelectorAll(p.selector).forEach(li=>{
      const name = li.textContent.trim();
      if(name) text += name + "\n";
    });
  });

  navigator.clipboard.writeText(text.trim())
    .then(()=>alert("ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼"))
    .catch(()=>alert("ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸ"));
}
</script>
</body>
</html>

