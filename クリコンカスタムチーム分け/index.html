<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>5対5 チーム分けツール FF14風 完全版</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
/* ===== フォント ===== */
body {
  font-family: "Noto Serif JP", "Hiragino Mincho ProN", "Yu Mincho", serif;
  max-width: 1000px;
  margin: auto;
  padding-bottom: 140px;
  background: linear-gradient(135deg,#a0e9ff,#f3f0ff,#c0eaff);
  background-size:400% 400%;
  animation:crystal 15s ease infinite;
}

@keyframes crystal {
  0%{background-position:0% 50%}
  50%{background-position:100% 50%}
  100%{background-position:0% 50%}
}

/* ===== FF14風パネル ===== */
.ff-panel {
  background: rgba(20, 20, 30, 0.75);
  border: 1px solid rgba(255, 215, 120, 0.6);
  border-radius: 12px;
  padding: 15px;
  margin-bottom: 20px;
  box-shadow: inset 0 0 10px rgba(255,255,255,0.05),0 0 15px rgba(0,0,0,0.4);
}

/* ===== 見出し ===== */
h1,h2,h3 {
  color:#f5e6b0;
  text-shadow:0 0 5px rgba(255,215,120,0.6),0 0 15px rgba(0,0,0,0.8);
  text-align:center;
}

/* ===== テーブル ===== */
table {
  border-collapse: collapse;
  width: 100%;
  margin-bottom: 10px;
  background: rgba(0,0,0,0.4);
  border-radius: 10px;
  overflow: hidden;
}

th {
  background: rgba(255,215,120,0.15);
  color:#f5e6b0;
}

td {
  background: rgba(255,255,255,0.05);
  padding:6px;
  text-align:center;
}

/* ===== 入力 ===== */
input,select {
  width:100%;
  font-size:16px;
  padding:6px;
  box-sizing:border-box;
}

/* ===== リスト ===== */
ul{list-style:none;padding:0}
li{margin:4px 0;padding:6px;border-radius:6px;color:white;border:1px solid rgba(255,215,120,0.5);box-shadow:inset 0 0 8px rgba(255,255,255,0.1)}

/* ===== ボタン ===== */
button{
  padding:10px;
  margin:6px 0;
  width:100%;
  font-size:16px;
  cursor:pointer;
  background: linear-gradient(#3a3a4f, #1c1c2a);
  border:1px solid rgba(255,215,120,0.7);
  color:#f5e6b0;
  border-radius:10px;
  box-shadow: inset 0 1px 0 rgba(255,255,255,0.2), 0 3px 6px rgba(0,0,0,0.6);
}

button:hover {
  background: linear-gradient(#4a4a6a, #26263a);
}

/* ===== フッター ===== */
.fixed-footer{
  position:fixed;
  bottom:0;
  left:0;
  width:100%;
  text-align:center;
  font-size:12px;
  background:rgba(20,20,30,0.8);
  border-top:1px solid rgba(255,215,120,0.5);
  color:#f5e6b0;
  padding:10px 0;
  z-index:1000;
}

/* ===== スマホ最適化 ===== */
@media(max-width:768px){
  h1{text-align:center;font-size:22px}
  h2{font-size:18px}
  h3{font-size:16px}
}
</style>
</head>

<body>

<h1>5対5 チーム分けツール（FF14風）</h1>

<!-- ===== 実力のみ ===== -->
<div class="ff-panel">
<h2>実力のみチーム分け</h2>
<table id="powerTable">
<tr><th>名前</th><th>実力</th></tr>
</table>

<button onclick="runPower()">チーム分け実行</button>
<button onclick="copyPower()">コピー（名前のみ）</button>

<h3>アストラ</h3>
<ul id="powerA"></ul>
<h3>アンブラ</h3>
<ul id="powerB"></ul>
</div>

<!-- ===== 理想編成 ===== -->
<div class="ff-panel">
<h2>理想編成チーム分け</h2>

<table>
<tr><th></th><th>タンク</th><th>ヒーラー</th><th>DPS（メレー）</th><th>DPS（遠隔）</th></tr>
<tr>
<td>アストラ</td>
<td><input type="number" id="aTank" value="1" min="0" max="2"></td>
<td><input type="number" id="aHeal" value="1" min="0" max="2"></td>
<td><input type="number" id="aMel" value="2" min="0" max="5"></td>
<td><input type="number" id="aRan" value="1" min="0" max="5"></td>
</tr>
<tr>
<td>アンブラ</td>
<td><input type="number" id="bTank" value="1" min="0" max="2"></td>
<td><input type="number" id="bHeal" value="1" min="0" max="2"></td>
<td><input type="number" id="bMel" value="2" min="0" max="5"></td>
<td><input type="number" id="bRan" value="1" min="0" max="5"></td>
</tr>
</table>

<table id="idealTable">
<tr><th>名前</th><th>実力</th><th>ロール</th></tr>
</table>

<button onclick="runIdeal()">チーム分け実行</button>
<button onclick="copyIdeal()">コピー（名前のみ）</button>
<button onclick="resetSavedData()" style="background:#d9534f;">保存データをリセット</button>

<h3>アストラ</h3>
<ul id="idealA"></ul>
<h3>アンブラ</h3>
<ul id="idealB"></ul>
</div>

<footer class="fixed-footer">
<p>&copy; 2010 - 2025 SQUARE ENIX CO., LTD. All Rights Reserved.</p>
</footer>

<script>
/* ===== データ ===== */
const ranks=["~ゴールド","プラチナ","ダイアモンド","クリスタル（～1000）","クリスタル（1000～1999）","オメガ","アルテマ"];
const rankValue={"~ゴールド":1,"プラチナ":2,"ダイアモンド":3,"クリスタル（～1000）":4,"クリスタル（1000～1999）":5,"オメガ":6,"アルテマ":7};
const rankColor={"~ゴールド":"#FFD700","プラチナ":"#00FFFF","ダイアモンド":"#FFA500","クリスタル（～1000）":"#1E90FF","クリスタル（1000～1999)":"#1E90FF","オメガ":"#800080","アルテマ":"#FF0000"};
const roles=["タンク","ヒーラー","DPS（メレー）","DPS（遠隔）","フリー"];
const roleColor={"タンク":"#1E90FF","ヒーラー":"#32CD32","DPS（メレー）":"#FF4500","DPS（遠隔）":"#FF4500","フリー":"#808080"};

const powerTable=document.getElementById("powerTable");
const idealTable=document.getElementById("idealTable");

/* ===== 初期入力欄作成（10人固定） ===== */
for(let i=0;i<10;i++){
  powerTable.innerHTML+=`<tr><td><input></td><td><select>${ranks.map(r=>`<option>${r}</option>`)}</select></td></tr>`;
  idealTable.innerHTML+=`<tr><td><input></td><td><select>${ranks.map(r=>`<option>${r}</option>`)}</select></td><td><select>${roles.map(r=>`<option>${r}</option>`)}</select></td></tr>`;
}

/* ===== 結果格納 ===== */
let powerResult=[], idealResult=[];

/* ===== 実力のみチーム分け ===== */
function runPower(){
  const rows=[...powerTable.rows].slice(1);
  let p=rows.map(r=>({name:r.cells[0].firstChild.value,rank:r.cells[1].firstChild.value,val:rankValue[r.cells[1].firstChild.value]}));
  p.sort((a,b)=>b.val-a.val);
  let A=[],B=[],sa=0,sb=0;
  p.forEach(x=>{sa<=sb?(A.push(x),sa+=x.val):(B.push(x),sb+=x.val)});
  powerResult=[A,B];
  show(A,B,"powerA","powerB",true);
}

/* ===== 理想編成チーム分け ===== */
function runIdeal(){
  const rows=[...idealTable.rows].slice(1);
  let p=rows.map(r=>({name:r.cells[0].firstChild.value,rank:r.cells[1].firstChild.value,val:rankValue[r.cells[1].firstChild.value],role:r.cells[2].firstChild.value}));

  let A=[],B=[];
  const cfgA={"タンク":parseInt(aTank.value),"ヒーラー":parseInt(aHeal.value),"DPS（メレー）":parseInt(aMel.value),"DPS（遠隔）":parseInt(aRan.value)};
  const cfgB={"タンク":parseInt(bTank.value),"ヒーラー":parseInt(bHeal.value),"DPS（メレー）":parseInt(bMel.value),"DPS（遠隔）":parseInt(bRan.value)};

  // 各ロールごとに割り振り
  ["タンク","ヒーラー","DPS（メレー）","DPS（遠隔）"].forEach(r=>{
    let candidates=p.filter(x=>x.role===r);
    while(cfgA[r]>0 && candidates.length>0){ A.push(candidates.shift()); cfgA[r]--; }
    while(cfgB[r]>0 && candidates.length>0){ B.push(candidates.shift()); cfgB[r]--; }
  });

  // フリーとして残りを補填
  let free=p.filter(x=>!A.includes(x)&&!B.includes(x));
  while(A.length<5){ let x=free.shift(); x.role="フリー"; A.push(x); }
  while(B.length<5){ let x=free.shift(); x.role="フリー"; B.push(x); }

  idealResult=[A,B];
  show(A,B,"idealA","idealB",false);
}

/* ===== 表示 ===== */
function show(A,B,idA,idB,isPower){
  document.getElementById(idA).innerHTML="";
  document.getElementById(idB).innerHTML="";
  A.forEach(x=>document.getElementById(idA).innerHTML+=
    `<li style="background:${isPower?rankColor[x.rank]:roleColor[x.role]}">${x.name}${isPower?"":"："+x.role+"（"+x.rank+"）"}</li>`);
  B.forEach(x=>document.getElementById(idB).innerHTML+=
    `<li style="background:${isPower?rankColor[x.rank]:roleColor[x.role]}">${x.name}${isPower?"":"："+x.role+"（"+x.rank+"）"}</li>`);
}

/* ===== コピー ===== */
function copyPower(){
  navigator.clipboard.writeText("【アストラ】\n"+powerResult[0].map(x=>x.name).join("\n")+"\n\n【アンブラ】\n"+powerResult[1].map(x=>x.name).join("\n"));
}
function copyIdeal(){
  navigator.clipboard.writeText("【アストラ】\n"+idealResult[0].map(x=>x.name).join("\n")+"\n\n【アンブラ】\n"+idealResult[1].map(x=>x.name).join("\n"));
}

/* ===== 自動保存 ===== */
const STORAGE_KEY="team_divider_save";
document.addEventListener("input",saveData);
function saveData(){
  localStorage.setItem(STORAGE_KEY,JSON.stringify({
    power:[...powerTable.rows].slice(1).map(r=>({n:r.cells[0].firstChild.value,r:r.cells[1].firstChild.value})),
    ideal:[...idealTable.rows].slice(1).map(r=>({n:r.cells[0].firstChild.value,r:r.cells[1].firstChild.value,ro:r.cells[2].firstChild.value})),
    cfg:{aTank:aTank.value,aHeal:aHeal.value,aMel:aMel.value,aRan:aRan.value,bTank:bTank.value,bHeal:bHeal.value,bMel:bMel.value,bRan:bRan.value}
  }));
}
(function(){
  const d=JSON.parse(localStorage.getItem(STORAGE_KEY));
  if(!d)return;
  d.power.forEach((x,i)=>{powerTable.rows[i+1].cells[0].firstChild.value=x.n;powerTable.rows[i+1].cells[1].firstChild.value=x.r});
  d.ideal.forEach((x,i)=>{idealTable.rows[i+1].cells[0].firstChild.value=x.n;idealTable.rows[i+1].cells[1].firstChild.value=x.r;idealTable.rows[i+1].cells[2].firstChild.value=x.ro});
  Object.keys(d.cfg).forEach(k=>window[k].value=d.cfg[k]);
})();

/* ===== リセット ===== */
function resetSavedData(){
  if(!confirm("保存データをすべて削除します。よろしいですか？"))return;
  localStorage.removeItem(STORAGE_KEY);
  location.reload();
}
</script>

</body>
</html>
